import{_ as f}from"./app.523dd8ec.js";import{$ as _}from"./jquery.70db95b2.js";import"./jquery.dataTables.min.aec3f10c.js";import{o as r,e as l,j as t,K as c,M as b,h,F as x,J as w,x as n,I as m,L as v}from"./vue.esm-bundler.5523ad96.js";const E={data:function(){return{entries:[],loading:!0,session:JSON.parse(sessionStorage.getItem("semtinel"))}},methods:{newEntry:function(){this.$router.push("/semtinel/logistics/entry")},listReload:function(){this.getEntriesTable(!0)},entryDetail:function(s){this.$router.push({name:"logistics.entry.detail",params:{entry:JSON.stringify(s)}})},async getEntriesTable(s=!1){let o=this,g=localStorage.getItem("stnel_logist_pole"),p=localStorage.getItem("stnel_logist_project");this.loading=!0;let i={"User-Agent":"testing/1.0",Accept:"application/json",Authorization:"Bearer "+o.session.access_token};await fetch("http://localhost/semtinel/public/api/logistics/entries/"+g+"/"+p+"/"+s,{method:"GET",headers:i}).then(a=>a.json()).then(a=>{o.entries=a,o.loading=!1,_("#datatable").DataTable().destroy()&&setTimeout(()=>{_("#datatable").DataTable({lengthMenu:[[10,15,25,50,-1],[10,15,25,50,"Todos"]],pageLength:10,columnDefs:[{targets:"no-sort",orderable:!1,order:[]}],columns:[{width:"5%"},null,{width:"15%"},{width:"15%"},{width:"15%"},{width:"10%"},{width:"10%"},{width:"8%"}],language:{decimal:"",emptyTable:"No hay informaci\xF3n",info:"Mostrando _START_ a _END_ de _TOTAL_ Registros",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total registros)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ Registros",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar: ",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}}})})}).catch(a=>{this.errorMessage=a,toastr.error("Error: "+a)})}},mounted(){let s=this;JSON.parse(sessionStorage.getItem("semtinel")).access_token||(sessionStorage.clear(),window.document.location.href="http://localhost/semtinel/login");let o=localStorage.getItem("stnel_logist_pole"),g=localStorage.getItem("stnel_logist_project"),p={"User-Agent":"testing/1.0",Accept:"application/json",Authorization:"Bearer "+s.session.access_token};JSON.parse(sessionStorage.getItem("semtinel")),fetch("http://localhost/semtinel/public/api/logistics/entries/"+o+"/"+g+"/true",{method:"GET",headers:p}).then(i=>i.json()).then(i=>{s.entries=i,s.loading=!1,setTimeout(()=>{_("#datatable").DataTable({retrieve:!0,lengthMenu:[[10,15,25,50,-1],[10,15,25,50,"Todos"]],pageLength:10,columnDefs:[{targets:"no-sort",orderable:!1,order:[]}],language:{decimal:"",emptyTable:"No hay informaci\xF3n",info:"Mostrando _START_ a _END_ de _TOTAL_ Registros",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total registros)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ Registros",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar: ",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}}})})}).catch(i=>{this.errorMessage=i,toastr.error("Error: "+i)})}},T={class:"container-fluid px-0"},S={class:"card"},M={class:"card-header"},k=t("h3",{class:"card-title"},"Entradas de productos en obra",-1),A={class:"card-tools"},D=t("i",{class:"mdi mdi-reload mdi-24px text-green"},null,-1),C=[D],N=t("i",{class:"mdi mdi-plus-circle mdi-24px text-green"},null,-1),R=[N],j={class:"card-body"},y=t("div",{class:"col-12 text-center py-5 loading-table"},[t("span",{class:"mdi mdi-loading mdi-spin mdi-36px"},"\xA0Cargando entradas de productos en obra...")],-1),F=[y],I={class:"col-12"},O={id:"datatable",class:"table table-striped"},B=t("thead",null,[t("tr",null,[t("th",{width:"5%",class:"text-center no-sort"},"No."),t("th",null,"Documento"),t("th",{width:"15%"},"Origen"),t("th",{width:"15%"},"Orden Compra"),t("th",{width:"15%"},"Destino"),t("th",{width:"10%",class:"text-center"},"Fecha"),t("th",{width:"10%",class:"no-sort text-center"},"Estado"),t("th",{width:"8%",class:"no-sort text-center"},"Confirmada")])],-1),L={class:"text-center"},P=["onClick"],$={class:"text-center"},U={class:"text-center"},z={class:"text-center"};function J(s,o,g,p,i,a){const d=v("tooltip");return r(),l("div",T,[t("div",S,[t("div",M,[k,t("div",A,[c((r(),l("button",{type:"button",class:"btn btn-tool pr-2",onClick:o[0]||(o[0]=b(e=>a.listReload(),["stop"]))},C)),[[d,"Recargar Listado"]]),c((r(),l("button",{type:"button",class:"btn btn-tool pl-0","data-toggle":"modal","data-target":"#modal-system-form",onClick:o[1]||(o[1]=e=>a.newEntry())},R)),[[d,"Nueva Entrada"]])])]),t("div",j,[t("div",{class:h(["row",s.loading?"":"hidden"])},F,2),t("div",{class:h(["row",s.loading?"hidden":""])},[t("div",I,[t("table",O,[B,t("tbody",null,[(r(!0),l(x,null,w(s.entries,(e,u)=>(r(),l("tr",{key:e.id},[t("td",L,n(u+1),1),t("td",null,[c(t("span",{class:h(["fas fa-paperclip",e.attach_path==""||e.attach_path==null?"icon-noexists":"icon-exists"])},null,2),[[d,e.attach_path==""||e.attach_path==null?"Sin arhivo adjunto":"Archivo adjunto"]]),m("\xA0 "),c((r(),l("a",{class:"show-lnk",href:"javascript:void(0);",onClick:G=>a.entryDetail(e)},[m(n(e.document_number),1)],8,P)),[[d,"Click para Mostrar Detalles de esta Entrada"]])]),t("td",null,n(e.origin),1),t("td",null,n(e.oc),1),t("td",null,n(e.warehouse_name),1),t("td",$,n(e.created_at),1),t("td",U,[t("span",{class:h(["badge",e.status=="Parcial"?"badge-warning":"badge-dark"])},n(e.status),3)]),t("td",z,[c(t("i",{class:h(["mdi mdi-18px",e.confirm==1?"mdi-radiobox-marked icon-exists":"mdi-checkbox-blank-circle-outline icon-noexists"])},null,2),[[d,e.confirm==1?"Confirmada":"Sin Confirmar"]])])]))),128))])])])],2)])])])}const H=f(E,[["render",J]]);export{H as default};
