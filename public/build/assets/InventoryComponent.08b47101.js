import{_ as T,P as S}from"./app.523dd8ec.js";import{$ as k}from"./jquery.70db95b2.js";import"./jquery.dataTables.min.aec3f10c.js";import{L as D,o as l,e as r,j as t,h as f,F as y,J as b,x as a,I as d,M as g,k as u,K as _,s as j,P as E,N as C,m as O,i as A}from"./vue.esm-bundler.5523ad96.js";import{_ as P,a as q,b as M}from"./icon-jpg.b5720497.js";const F={props:{history:{type:Object,default:()=>{}},history_loading:{type:Boolean,default:!0},history_empty:{type:Boolean,default:!0}},methods:{getDateTimeline:function(s){const o={1:"Ene.",2:"Feb.",3:"Mar.",4:"Abr.",5:"May.",6:"Jun.",7:"Jul.",8:"Ago.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dic."},i=s.split("-");return parseInt(i[2])+" "+o[parseInt(i[1])]+" "+i[0]},openScanner:function(s){window.open("http://localhost/semtinel/storage/app/public/"+s,"_blank","noreferrer")},docPdf:function(s){window.open("http://localhost/semtinel/public/api/logistics/pdf/entry/"+s,"_blank","noreferrer")}}},x=t("div",{class:"col-12 text-center py-5 loading-table"},[t("span",{class:"mdi mdi-loading mdi-spin mdi-36px"},"\xA0Cargando historial...")],-1),N=[x],U=t("div",{class:"col-12 text-center empty-table"},[t("h6",null,"Ning\xFAna actividad encontrada en este periodo")],-1),I=[U],H={class:"time-label"},R={class:"bg-success px-2"},V={key:0},B=t("i",{class:"mdi mdi-truck-check mdi-18px bg-primary"},null,-1),J={class:"timeline-item"},L={class:"time"},z=t("i",{class:"far fa-clock"},null,-1),K={key:0,class:"timeline-header timeline-gray-light"},X=t("strong",null,"Entrada Creada",-1),G=["onClick"],Q=["href"],W={key:1,class:"timeline-header timeline-gray-light"},Y=t("strong",null,"Entrada Creada",-1),Z=["onClick"],tt=["href"],st={class:"timeline-body timeline-gray-light p-3"},et={class:"row invoice-info"},ot={class:"col-sm-3 invoice-col"},at={class:"form-group"},it=t("label",{class:"mb-1"},"Origen",-1),lt={class:"p-0"},rt={class:"form-group"},ct=t("label",{class:"mb-1"},"Orden de Compra",-1),dt={class:"p-0"},nt={class:"col-sm-3 invoice-col"},_t={class:"form-group"},ht=t("label",{class:"mb-1"},"Destino",-1),pt={class:"p-0"},ut={class:"form-group"},mt=t("label",{class:"mb-1"},"Responsable",-1),gt={class:"p-0"},ft={class:"col-sm-3 invoice-col"},yt={class:"form-group"},vt=t("label",{class:"mb-1"},"Estado",-1),bt=t("br",null,null,-1),$t={class:"p-0"},kt={class:"form-group"},wt=t("label",{class:"mb-1"},"Confirmada",-1),Ct=t("br",null,null,-1),jt={class:"p-0"},Et={key:1},At=t("i",{class:"fas fa-trash-alt bg-danger"},null,-1),Tt={class:"timeline-item"},Dt={class:"time"},St=t("i",{class:"far fa-clock"},null,-1),Ot={class:"timeline-header timeline-gray-light border-0"},Pt=t("strong",null,"Entrada Cancelada",-1),qt=["onClick"],Mt=["href"],Ft={key:2},xt=t("i",{class:"fas fa-check bg-success"},null,-1),Nt={class:"timeline-item"},Ut={class:"time"},It=t("i",{class:"far fa-clock"},null,-1),Ht={class:"timeline-header timeline-gray-light border-0"},Rt=t("strong",null,"Entrada Confirmada",-1),Vt=["onClick"],Bt=["href"],Jt={key:3},Lt=t("i",{class:"fas fa-paperclip bg-purple"},null,-1),zt={class:"timeline-item"},Kt={class:"time"},Xt=t("i",{class:"far fa-clock"},null,-1),Gt={class:"timeline-header timeline-gray-light border-0"},Qt=t("strong",null,"Archivo adjuntado",-1),Wt=["href"],Yt={class:"timeline-body timeline-gray-light px-3 pb-0"},Zt={class:"row invoice-info"},ts={class:"col-12 invoice-col"},ss={class:"form-group"},es=t("label",{class:"mb-1"},"Click para Abrir",-1),os=t("br",null,null,-1),as=["onClick"],is={src:P,alt:"Documento Escaneado"},ls=["onClick"],rs={src:q,alt:"Documento Escaneado"},cs=["onClick"],ds={src:M,alt:"Documento Escaneado"},ns={key:4},_s=t("i",{class:"mdi mdi-plus mdi-18px bg-warning"},null,-1),hs={class:"timeline-item"},ps={class:"time"},us=t("i",{class:"far fa-clock"},null,-1),ms={key:0,class:"timeline-header timeline-gray-light"},gs=t("strong",null,"Recepc\xF3n del Producto",-1),fs=["onClick"],ys=["href"],vs={key:1,class:"timeline-header timeline-gray-light"},bs=t("strong",null,"Recepci\xF3n del Producto",-1),$s=["onClick"],ks=["href"],ws={class:"timeline-body timeline-gray-light p-3"},Cs={class:"row invoice-info"},js={class:"col-sm-6 invoice-col"},Es={class:"form-group"},As=t("label",{class:"mb-1"},"Origen",-1),Ts={class:"p-0"},Ds={class:"form-group"},Ss=t("label",{class:"mb-1"},"Orden de Compra",-1),Os={class:"p-0"},Ps={class:"form-group"},qs=t("label",{class:"mb-1"},"Unidad Medida",-1),Ms=t("br",null,null,-1),Fs={class:"p-0"},xs={class:"col-sm-6 invoice-col"},Ns={class:"form-group"},Us=t("label",{class:"mb-1"},"Destino",-1),Is={class:"p-0"},Hs={class:"form-group"},Rs=t("label",{class:"mb-1"},"Responsable",-1),Vs={class:"p-0"},Bs={class:"form-group"},Js=t("label",{class:"mb-1"},"Cantidad",-1),Ls=t("br",null,null,-1),zs={class:"p-0"},Ks=t("div",null,[t("i",{class:"far fa-clock bg-gray"})],-1);function Xs(s,o,i,c,v,n){const $=D("tooltip");return l(),r(y,null,[t("div",{class:f(["row",i.history_loading?"":"hidden"])},N,2),t("div",{class:f(["row mt-3",i.history_empty&&!i.history_loading?"":"hidden"])},I,2),i.history_empty?u("",!0):(l(),r("div",{key:0,class:f(["timeline timeline-inverse",i.history_loading?"hidden":""])},[(l(!0),r(y,null,b(i.history,(w,p)=>(l(),r(y,{key:p},[t("div",H,[t("span",R,a(n.getDateTimeline(p)),1)]),(l(!0),r(y,null,b(w,(e,m)=>(l(),r(y,{key:m},[e.node_type=="create-entry"?(l(),r("div",V,[B,t("div",J,[t("span",L,[z,d(" "+a(e.hour),1)]),e.attach_path!=null&&e.attach_path!=""?(l(),r("h3",K,[X,d(" desde el documento "),t("a",{href:"javascript:void(0);",onClick:g(h=>n.openScanner(e.attach_path),["stop"])},a(e.document_number),9,G),d(" por "),t("strong",null,[t("a",{href:"mailto:"+e.created_by_email},a(e.created_by_name),9,Q)])])):(l(),r("h3",W,[Y,d(" desde el documento "),t("a",{href:"javascript:void(0);",onClick:g(h=>n.docPdf(e.id),["stop"])},a(e.document_number),9,Z),d(" por "),t("strong",null,[t("a",{href:"mailto:"+e.created_by_email},a(e.created_by_name),9,tt)])])),t("div",st,[t("div",et,[t("div",ot,[t("div",at,[it,t("h6",lt,[t("strong",null,a(e.origin),1)])]),t("div",rt,[ct,t("h6",dt,[t("strong",null,a(e.oc),1)])])]),t("div",nt,[t("div",_t,[ht,t("h6",pt,[t("strong",null,a(e.warehouse_name),1)])]),t("div",ut,[mt,t("h6",gt,[t("strong",null,a(e.warehouse_owner),1)])])]),t("div",ft,[t("div",yt,[vt,bt,t("h6",$t,[t("strong",null,"Entrega "+a(e.status),1)])]),t("div",kt,[wt,Ct,t("h6",jt,[t("strong",null,a(e.confirm),1)])])])])])])])):u("",!0),e.node_type=="cancel-entry"?(l(),r("div",Et,[At,t("div",Tt,[t("span",Dt,[St,d(" "+a(e.hour),1)]),t("h3",Ot,[Pt,d(" No. "),t("a",{href:"javascript:void(0);",onClick:g(h=>n.openScanner(e.attach_path),["stop"])},a(e.document_number),9,qt),d(" por "),t("strong",null,[t("a",{href:"mailto:"+e.cancel_by_email},a(e.cancel_by_name),9,Mt)])])])])):u("",!0),e.node_type=="confirm-entry"?(l(),r("div",Ft,[xt,t("div",Nt,[t("span",Ut,[It,d(" "+a(e.hour),1)]),t("h3",Ht,[Rt,d(" No. "),t("a",{href:"javascript:void(0);",onClick:g(h=>n.openScanner(e.attach_path),["stop"])},a(e.document_number),9,Vt),d(" por "),t("strong",null,[t("a",{href:"mailto:"+e.confirm_by_email},a(e.confirm_by_name),9,Bt)])])])])):u("",!0),e.node_type=="attach-entry"?(l(),r("div",Jt,[Lt,t("div",zt,[t("span",Kt,[Xt,d(" "+a(e.hour),1)]),t("h3",Gt,[Qt,d(" a la Entrada "),t("strong",null,a(e.document_number),1),d(" por "),t("strong",null,[t("a",{href:"mailto:"+e.attach_by_email},a(e.attach_by_name),9,Wt)])]),t("div",Yt,[t("div",Zt,[t("div",ts,[t("div",ss,[es,os,e.attach_path!=""&&e.attach_path!=null&&e.attach_type=="pdf"?(l(),r("a",{key:0,href:"javascript:void(0);",onClick:g(h=>n.openScanner(e.attach_path),["stop"])},[_(t("img",is,null,512),[[$,"Click para abrir"]])],8,as)):e.attach_path!=""&&e.attach_path!=null&&e.attach_type=="png"?(l(),r("a",{key:1,href:"javascript:void(0);",onClick:g(h=>n.openScanner(e.attach_path),["stop"])},[_(t("img",rs,null,512),[[$,"Click para abrir"]])],8,ls)):e.attach_path!=""&&e.attach_path!=null&&(e.attach_type=="jpg"||e.attach_type=="jpeg")?(l(),r("a",{key:2,href:"javascript:void(0);",onClick:g(h=>n.openScanner(e.attach_path),["stop"])},[_(t("img",ds,null,512),[[$,"Click para abrir"]])],8,cs)):u("",!0)])])])])])])):u("",!0),e.node_type=="product-add"?(l(),r("div",ns,[_s,t("div",hs,[t("span",ps,[us,d(" "+a(e.hour),1)]),e.attach_path!=null&&e.attach_path!=""?(l(),r("h3",ms,[gs,d(" en la Entrada "),t("a",{href:"javascript:void(0);",onClick:g(h=>n.openScanner(e.attach_path),["stop"])},a(e.document_number),9,fs),d(" por "),t("strong",null,[t("a",{href:"mailto:"+e.created_by_email},a(e.created_by_name),9,ys)])])):(l(),r("h3",vs,[bs,d(" en la Entrada "),t("a",{href:"javascript:void(0);",onClick:g(h=>n.docPdf(e.id),["stop"])},a(e.document_number),9,$s),d(" por "),t("strong",null,[t("a",{href:"mailto:"+e.created_by_email},a(e.created_by_name),9,ks)])])),t("div",ws,[t("div",Cs,[t("div",js,[t("div",Es,[As,t("h6",Ts,[t("strong",null,a(e.origin),1)])]),t("div",Ds,[Ss,t("h6",Os,[t("strong",null,a(e.oc),1)])]),t("div",Ps,[qs,Ms,t("h6",Fs,[t("strong",null,a(e.um),1)])])]),t("div",xs,[t("div",Ns,[Us,t("h6",Is,[t("strong",null,a(e.warehouse_name),1)])]),t("div",Hs,[Rs,t("h6",Vs,[t("strong",null,a(e.warehouse_owner),1)])]),t("div",Bs,[Js,Ls,t("h6",zs,[t("strong",null,a(e.received_quantity),1)])])])])])])])):u("",!0)],64))),128))],64))),128)),Ks],2))],64)}const Gs=T(F,[["render",Xs]]),Qs={data:function(){return{pole_name:"",project_name:"",tabactive:1,store_products:[],products:[],products_filter:{},products_loading:!0,lastproducts:[],lastproducts_empty:!1,history:{},history_loading:!0,history_empty:!1,history_product:{},history_product_loading:!0,history_product_empty:!1,period:"today",filter_apply:!1,lastproducts_loading:!0,session:JSON.parse(sessionStorage.getItem("semtinel")),poles:JSON.parse(localStorage.getItem("semtinel_poles")),projects:JSON.parse(localStorage.getItem("semtinel_projects")),pole:localStorage.getItem("stnel_logist_pole"),project:localStorage.getItem("stnel_logist_project"),warehouses:JSON.parse(localStorage.getItem("semtinel_warehouses")),products_categories:JSON.parse(localStorage.getItem("semtinel_products_categories")),filter_productcategory:"all",filter_warehouse:"all",filter_oc:"",filter_product:"",item_details:{pole:"",project:"",oc:"",product_code:"",description:"",um:"",quantity:0,warehouse_id:"-",warehouse_name:"",warehouse_owner:0,stowage_card:""},productcart:{id:0,desc:"",um:"",quantity:"",price_unit:"",price_total:""},productcart_form_loading:!1,productcart_quantity:1,productcart_error:!1,productcart_form_okbtn_text:"Aceptar",show_details:!1,datatable_language:{decimal:"",emptyTable:"No hay informaci\xF3n",info:"Mostrando _START_ a _END_ de _TOTAL_ Registros",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total registros)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ Registros",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar: ",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}}}},watch:{period:function(s){this.getLastProductsTable(s),this.getHistoryTimeline(s)}},components:{"page-header":S,timeline:Gs},created(){let s=this;s.poles.map(function(o,i){o.abbr==s.pole&&(s.pole_name=o.name)}),s.projects.map(function(o,i){o.id==s.project&&(s.project_name=o.name)})},methods:{listReload:function(){},addCart:function(s){let o=this;o.productcart={id:s.id,description:s.description,um:s.um,quantity:1,price_unit:parseFloat(s.price_unit).toFixed(2),price_total:1*parseFloat(s.price_unit).toFixed(2)},o.productcart_quantity=1},processAddCart:function(){let s=this,o=!1,i;s.$root.cart_items.map(function(c,v){c.id==s.productcart.id&&(s.$root.cart_items[v].quantity=s.productcart_quantity,i=s.productcart_quantity*parseFloat(s.$root.cart_items[v].price_unit).toFixed(2),i=parseFloat(i).toFixed(2),s.$root.cart_items[v].price_total=i,o=!0)}),s.productcart.quantity=s.productcart_quantity,s.productcart.price_total=s.productcart_quantity*parseFloat(s.productcart.price_unit).toFixed(2),s.productcart.price_total=parseFloat(s.productcart.price_total).toFixed(2),o||(s.$root.cart_items.push(s.productcart),s.$root.cart_quantity++),s.$refs.addCartClose.click()},filterApply:function(){let s=this;s.products_loading=!0,s.products=s.store_products,s.filter_apply=!1,s.products_filter={},Object.keys(s.products).forEach(o=>{let i=o,c=!0;s.filter_productcategory!="all"&&s.products[o].category_name!=s.filter_productcategory&&(c=!1),s.filter_warehouse!="all"&&s.products[o].warehouse_id!=s.filter_warehouse&&(c=!1),s.filter_oc!=""&&s.filter_oc.length>0&&s.products[o].oc!=s.filter_oc&&(c=!1),s.filter_product!=""&&s.filter_product.length>0&&s.products[o].product_code!=s.filter_product&&(c=!1),c&&(s.products_filter[i]=s.products[o])}),Object.keys(s.products).length!=Object.keys(s.products_filter).length&&(s.products=s.products_filter,s.filter_apply=!0),k("#datatable-products").DataTable().destroy()&&setTimeout(()=>{k("#datatable-products").DataTable({lengthMenu:[[10,15,25,50,-1],[10,15,25,50,"Todos"]],pageLength:10,order:[[0,"asc"]],columnDefs:[{targets:"no-sort",orderable:!1,order:[]}],columns:[{width:"15%"},{width:"15%"},null,{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],language:s.datatable_language})}),s.products_loading=!1},filterClear:function(){let s=this;s.products_loading=!0,s.filter_productcategory="all",s.filter_warehouse="all",s.filter_oc="",s.filter_product="",s.products=s.store_products,s.filter_apply=!1,k("#datatable-products").DataTable().destroy()&&setTimeout(()=>{k("#datatable-products").DataTable({lengthMenu:[[10,15,25,50,-1],[10,15,25,50,"Todos"]],pageLength:10,order:[[0,"asc"]],columnDefs:[{targets:"no-sort",orderable:!1,order:[]}],columns:[{width:"15%"},{width:"15%"},null,{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],language:s.datatable_language})}),s.products_loading=!1},show:function(s){let o=this;o.item_details={pole:o.products[s].pole,project:o.products[s].project,oc:o.products[s].oc,product_code:o.products[s].product_code,description:o.products[s].description,um:o.products[s].um,quantity:o.products[s].quantity,warehouse_name:o.products[s].warehouse_name,warehouse_owner:o.products[s].warehouse_name,stowage_card:o.products[s].stowage_card},o.show_details=!0},productHistory:function(s,o){let i=this,c=i.period;i.tabactive==1&&(c="all"),this.getProductHistoryTimeline(s,o,c)},async getLastProductsTable(s="today"){let o=this;o.lastproducts_loading=!0;let i={"User-Agent":"testing/1.0",Accept:"application/json",Authorization:"Bearer "+o.session.access_token};axios.post("http://localhost/semtinel/public/api/logistics/inventory/lastproducts",{pole:o.pole,project:o.project,period:o.period},{headers:i}).then(function(c){c.data.success?(o.lastproducts=c.data.products,o.lastproducts_loading=!1,o.lastproducts_empty=!(Object.keys(c.data.products).length>0)):toastr.error("Error al intentar cargar los datos.")}).catch(function(c){toastr.error("Error al intentar cargar los datos.")})},async getHistoryTimeline(s="today"){let o=this;o.history_loading=!0;let i={"User-Agent":"testing/1.0",Accept:"application/json",Authorization:"Bearer "+o.session.access_token};axios.post("http://localhost/semtinel/public/api/logistics/inventory/history",{pole:o.pole,project:o.project,period:o.period},{headers:i}).then(function(c){c.data.success?(o.history=c.data.history,o.history_loading=!1,o.history_empty=!(Object.keys(c.data.history).length>0)):toastr.error("Error al intentar cargar los datos.")}).catch(function(c){toastr.error("Error al intentar cargar los datos.")})},async getProductHistoryTimeline(s,o,i){let c=this;c.history_product_loading=!0;let v={"User-Agent":"testing/1.0",Accept:"application/json",Authorization:"Bearer "+c.session.access_token};axios.post("http://localhost/semtinel/public/api/logistics/inventory/history/"+s+"/"+o,{pole:c.pole,project:c.project,period:i},{headers:v}).then(function(n){n.data.success?(c.history_product=n.data.history,c.history_product_loading=!1,c.history_product_empty=!(Object.keys(n.data.history).length>0)):toastr.error("Error al intentar cargar los datos.")}).catch(function(n){toastr.error("Error al intentar cargar los datos.")})}},mounted(){let s=this;JSON.parse(sessionStorage.getItem("semtinel")).access_token||(sessionStorage.clear(),window.document.location.href="http://localhost/semtinel/login");let o={"User-Agent":"testing/1.0",Accept:"application/json",Authorization:"Bearer "+s.session.access_token};axios.post("http://localhost/semtinel/public/api/logistics/inventory/products",{pole:s.pole,project:s.project},{headers:o}).then(function(i){i.data.success?(s.store_products=i.data.products,s.products=i.data.products,s.products_loading=!1,setTimeout(()=>{k("#datatable-products").DataTable({retrieve:!0,lengthMenu:[[10,15,25,50,-1],[10,15,25,50,"Todos"]],pageLength:10,order:[[0,"asc"]],columnDefs:[{targets:"no-sort",orderable:!1,order:[]}],columns:[{width:"15%"},{width:"15%"},null,{width:"10%"},{width:"10%"},{width:"10%"},{width:"10%"}],language:s.datatable_language})})):toastr.error("Error al intentar cargar los datos.")}).catch(function(i){toastr.error("Error al intentar cargar los datos.")}),axios.post("http://localhost/semtinel/public/api/logistics/inventory/lastproducts",{pole:s.pole,project:s.project,period:s.period},{headers:o}).then(function(i){i.data.success?(s.store_lastproducts=i.data.products,s.lastproducts=i.data.products,s.lastproducts_loading=!1,s.lastproducts_empty=!(Object.keys(i.data.products).length>0)):toastr.error("Error al intentar cargar los datos.")}).catch(function(i){toastr.error("Error al intentar cargar los datos.")}),axios.post("http://localhost/semtinel/public/api/logistics/inventory/history",{pole:s.pole,project:s.project,period:s.period},{headers:o}).then(function(i){i.data.success?(s.history=i.data.history,s.history_loading=!1,s.history_empty=!(Object.keys(i.data.history).length>0)):toastr.error("Error al intentar cargar los datos.")}).catch(function(i){toastr.error("Error al intentar cargar los datos.")})}},Ws={key:0,class:"card card-default filters-panel"},Ys={class:"card-header"},Zs={class:"card-title"},te={key:0},se=t("i",null,"Filtro aplicado",-1),ee={class:"card-tools"},oe={type:"button",class:"btn btn-tool","data-card-widget":"collapse"},ae=t("i",{class:"fas fa-minus"},null,-1),ie=[ae],le={class:"card-body"},re={class:"row"},ce={class:"col-md-3"},de={class:"form-group"},ne=t("label",{for:"filter_category"},"Categor\xEDa",-1),_e=t("option",{value:"all"},"- Todas -",-1),he=["value"],pe={class:"col-md-3"},ue={class:"form-group"},me=t("label",{for:"filter_warehouse"},"Pa\xF1ol",-1),ge=t("option",{value:"all"},"- Todos -",-1),fe=["value"],ye={class:"col-md-3"},ve={class:"form-group"},be=t("label",{for:"filter_oc"},"Orden Compra",-1),$e={class:"col-md-3"},ke={class:"form-group"},we=t("label",{for:"filter_product"},"C\xF3digo Producto",-1),Ce={class:"card"},je={class:"card-header p-2"},Ee={class:"nav nav-pills float-start"},Ae={class:"nav-item"},Te={class:"nav-item"},De={class:"nav-item"},Se={key:0,class:"inventory-period float-end pr-1"},Oe=t("label",{for:"inventory_period",class:"float-left pt-2 text-right",style:{width:"auto"}},"Motrando:",-1),Pe=t("option",{value:"today"},"Hoy",-1),qe=t("option",{value:"currentweek"},"Esta semana",-1),Me=t("option",{value:"currentmonth"},"Este mes",-1),Fe=t("option",{value:"currentyear"},"Este a\xF1o",-1),xe=[Pe,qe,Me,Fe],Ne={class:"card-body"},Ue={class:"tab-content"},Ie={class:"tab-pane active",id:"products"},He=t("div",{class:"col-12 text-center py-5 loading-table"},[t("span",{class:"mdi mdi-loading mdi-spin mdi-36px"},"\xA0Cargando productos...")],-1),Re=[He],Ve=t("thead",null,[t("tr",null,[t("th",{width:"15%"},"Orden Compra"),t("th",{width:"15%"},"C\xF3digo"),t("th",null,"Descripci\xF3n"),t("th",{width:"10%",class:"text-center"},"UM"),t("th",{width:"10%",class:"text-center"},"Existencia"),t("th",{width:"10%",class:"text-center"},"Disponible"),t("th",{width:"10%",class:"text-right no-sort"})])],-1),Be=["onClick"],Je={class:"text-center"},Le={class:"text-center"},ze=t("td",{class:"text-center"},"\xA0",-1),Ke={class:"text-right"},Xe=["onClick"],Ge=t("span",{class:"mdi mdi-timeline-clock mdi-18px text-green"},null,-1),Qe=[Ge],We=["onClick"],Ye=t("span",{class:"mdi mdi-cart mdi-18px text-orange"},null,-1),Ze=[Ye],to={key:0,class:"tab-pane",id:"timeline"},so={key:1,class:"tab-pane",id:"lastentries"},eo=t("div",{class:"col-12 text-center py-5 loading-table"},[t("span",{class:"mdi mdi-loading mdi-spin mdi-36px"},"\xA0Cargando productos...")],-1),oo=[eo],ao=t("div",{class:"col-12 text-center empty-table"},[t("h6",null,"Ning\xFAn Producto encontrado")],-1),io=[ao],lo=t("thead",null,[t("tr",null,[t("th",{width:"15%"},"Orden Compra"),t("th",{width:"15%"},"C\xF3digo"),t("th",null,"Descripci\xF3n"),t("th",{width:"10%",class:"text-center"},"UM"),t("th",{width:"10%",class:"text-center"},"Existencia"),t("th",{width:"10%",class:"text-center"},"Disponible"),t("th",{width:"10%",class:"text-right no-sort"})])],-1),ro=["onClick"],co={class:"text-center"},no={class:"text-center"},_o=t("td",{class:"text-center"},"\xA0",-1),ho={class:"text-right"},po=["onClick"],uo=t("span",{class:"mdi mdi-timeline-clock mdi-18px text-green"},null,-1),mo=[uo],go={href:"javascript:void(0);",class:"btn-semti-tool",style:{padding:"4px 5px"},"data-toggle":"modal","data-target":"#modal-item-form"},fo=t("span",{class:"mdi mdi-cart mdi-18px text-danger"},null,-1),yo=[fo],vo={class:"modal fade",id:"modal-item-details","aria-hidden":"true",role:"dialog","data-backdrop":"static","data-keyboard":"false"},bo={class:"modal-dialog"},$o={class:"modal-content"},ko={class:"modal-header header-info"},wo=t("h4",{class:"modal-title"},"Detalles Producto",-1),Co={type:"button",ref:"Close",class:"close","data-dismiss":"modal","aria-label":"Close"},jo=t("span",{"aria-hidden":"true"},"\xD7",-1),Eo=[jo],Ao={class:"modal-body px-4 rounded-bottom"},To={class:"row py-1"},Do={class:"col-md-12"},So=t("span",{class:"detail-title"},"Polo",-1),Oo={class:"detail-desc"},Po={class:"row py-1"},qo={class:"col-md-12"},Mo=t("span",{class:"detail-title"},"Proyecto",-1),Fo={class:"detail-desc"},xo={class:"row py-1"},No={class:"col-md-12"},Uo=t("span",{class:"detail-title"},"C\xF3digo del Producto",-1),Io={class:"detail-desc"},Ho={class:"row py-1"},Ro={class:"col-md-12"},Vo=t("span",{class:"detail-title"},"Orden de Compra",-1),Bo={class:"detail-desc"},Jo={class:"row py-1"},Lo={class:"col-md-12"},zo=t("span",{class:"detail-title"},"Descripci\xF3n del Item",-1),Ko={class:"detail-desc"},Xo={class:"row py-1 mt-2"},Go={class:"col-md-4"},Qo=t("div",{class:"text-center"},[t("span",{class:"detail-title"},"UM")],-1),Wo={class:"detail-desc text-center"},Yo={class:"col-md-4"},Zo=t("div",{class:"text-center"},[t("span",{class:"detail-title"},"Cantidad")],-1),ta={class:"detail-desc text-center"},sa={class:"col-md-4"},ea=t("div",{class:"text-center"},[t("span",{class:"detail-title"},"Tarjeta Estiba")],-1),oa={class:"detail-desc text-center"},aa={class:"row py-1"},ia={class:"col-md-6"},la=t("div",{class:"text-center"},[t("span",{class:"detail-title"},"Pa\xF1ol")],-1),ra={class:"detail-desc text-center"},ca={class:"col-md-6"},da=t("div",{class:"text-center"},[t("span",{class:"detail-title"},"Responsable")],-1),na={class:"detail-desc text-center"},_a={class:"modal fade",id:"modal-item-history"},ha={class:"modal-dialog modal-lg"},pa={class:"modal-content"},ua={class:"modal-header header-info"},ma=t("h4",{class:"modal-title"},"Historial de Producto",-1),ga={type:"button",ref:"Close",class:"close","data-dismiss":"modal","aria-label":"Close"},fa=t("span",{"aria-hidden":"true"},"\xD7",-1),ya=[fa],va={class:"modal-body px-4 rounded-bottom"},ba={class:"row py-1"},$a={class:"col-12"},ka={class:"modal fade",id:"modal-item-addcart"},wa={class:"modal-dialog"},Ca={class:"modal-content"},ja={class:"modal-header header-green"},Ea=t("h4",{class:"modal-title"},"Agregar Producto al carrito",-1),Aa={type:"button",ref:"addCartClose",class:"close","data-dismiss":"modal","aria-label":"Close"},Ta=t("span",{"aria-hidden":"true"},"\xD7",-1),Da=[Ta],Sa={class:"modal-body px-4 rounded-bottom pb-2"},Oa={class:"row py-1"},Pa={class:"col-12 pb-2"},qa=t("span",{class:"detail-title"},"Descripci\xF3n",-1),Ma={class:"detail-desc"},Fa={class:"row"},xa={class:"col-md-4"},Na={class:"form-group"},Ua=t("label",{for:"productcart_um",class:"detail-title mb-1"},"UM:",-1),Ia={class:"col-md-4"},Ha={class:"form-group"},Ra=t("label",{for:"productcart_quantity",class:"detail-title mb-1"},"Cantidad:",-1),Va={class:"col-md-4 text-right"},Ba=["disabled"],Ja={key:0,class:"mdi mdi-check-all"},La={key:1,class:"mdi mdi-loading mdi-spin"};function za(s,o,i,c,v,n){const $=A("page-header"),w=A("timeline"),p=D("tooltip");return l(),r(y,null,[j($,{pagetitle:"Inventarios de productos en obra",breadcrumbs:!1,pole_project:!0,pole:s.pole_name,project:s.project_name},null,8,["pole","project"]),s.tabactive==1?(l(),r("div",Ws,[t("div",Ys,[t("h3",Zs,[t("i",{class:f(["fas fa-filter",s.filter_apply?"text-danger":""])},null,2),d("\xA0Filtros "),s.filter_apply?(l(),r("small",te,[d("("),se,d(")")])):u("",!0)]),t("div",ee,[_((l(),r("button",{type:"button",class:"btn btn-tool",onClick:o[0]||(o[0]=e=>n.filterApply())},[d(" Aplicar Filtros ")])),[[p,"Click para aplicar los filtros a la tabla"]]),_((l(),r("button",{type:"button",class:"btn btn-tool",onClick:o[1]||(o[1]=e=>n.filterClear())},[d(" Limpiar Filtros ")])),[[p,"Click para quitar los filtros aplicados a la tabla"]]),_((l(),r("button",oe,ie)),[[p,"Contraer/Expandir"]])])]),t("div",le,[t("div",re,[t("div",ce,[t("div",de,[ne,_(t("select",{class:"form-control",id:"filter_category","onUpdate:modelValue":o[2]||(o[2]=e=>s.filter_productcategory=e)},[_e,(l(!0),r(y,null,b(s.products_categories,(e,m)=>(l(),r("option",{key:m,value:m},a(e),9,he))),128))],512),[[E,s.filter_productcategory]])])]),t("div",pe,[t("div",ue,[me,_(t("select",{id:"filter_warehouse",size:"1",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=e=>s.filter_warehouse=e)},[ge,(l(!0),r(y,null,b(s.warehouses,(e,m)=>(l(),r("option",{key:m,value:e.id},a(e.name),9,fe))),128))],512),[[E,s.filter_warehouse]])])]),t("div",ye,[t("div",ve,[be,_(t("input",{type:"text",class:"form-control",id:"filter_oc",placeholder:"Orden de compra","onUpdate:modelValue":o[4]||(o[4]=e=>s.filter_oc=e)},null,512),[[C,s.filter_oc]])])]),t("div",$e,[t("div",ke,[we,_(t("input",{type:"text",class:"form-control",id:"filter_product",placeholder:"C\xF3digo de producto","onUpdate:modelValue":o[5]||(o[5]=e=>s.filter_product=e)},null,512),[[C,s.filter_product]])])])])])])):u("",!0),t("div",Ce,[t("div",je,[t("ul",Ee,[t("li",Ae,[t("a",{class:"nav-link active",href:"#products","data-toggle":"tab",onClick:o[6]||(o[6]=e=>s.tabactive=1)},"Productos")]),t("li",Te,[t("a",{class:"nav-link",href:"#timeline","data-toggle":"tab",onClick:o[7]||(o[7]=e=>s.tabactive=2)},"Historial")]),t("li",De,[t("a",{class:"nav-link",href:"#lastentries","data-toggle":"tab",onClick:o[8]||(o[8]=e=>s.tabactive=3)},"\xDAltimas entradas")])]),s.tabactive==2||s.tabactive==3?(l(),r("div",Se,[Oe,_(t("select",{name:"inventory_period",id:"inventory_period",class:"form-control float-end",style:{width:"auto"},"onUpdate:modelValue":o[9]||(o[9]=e=>s.period=e)},xe,512),[[E,s.period]])])):u("",!0)]),t("div",Ne,[t("div",Ue,[t("div",Ie,[t("div",{class:f(["row",s.products_loading?"":"hidden"])},Re,2),t("table",{id:"datatable-products",class:f(["table table-striped",s.products_loading?"hidden":""])},[Ve,t("tbody",null,[(l(!0),r(y,null,b(s.products,(e,m)=>(l(),r("tr",{key:e.id},[t("td",null,a(e.oc),1),t("td",null,a(e.product_code),1),t("td",null,[_((l(),r("a",{class:"show-lnk",href:"javascript:void(0);","data-toggle":"modal","data-target":"#modal-item-details",onClick:h=>n.show(m)},[d(a(e.description),1)],8,Be)),[[p,"Click para Mostrar Detalles de este producto"]])]),t("td",Je,a(e.um),1),t("td",Le,a(e.quantity),1),ze,t("td",Ke,[_((l(),r("a",{href:"javascript:void(0);",class:"btn-semti-tool",style:{padding:"4px 5px"},"data-toggle":"modal","data-target":"#modal-item-history",onClick:h=>n.productHistory(e.id_receipt,e.id)},Qe,8,Xe)),[[p,"Historial de este producto"]]),d(" \xA0 "),_((l(),r("a",{href:"javascript:void(0);",class:"btn-semti-tool",style:{padding:"4px 5px"},"data-toggle":"modal","data-target":"#modal-item-addcart",onClick:h=>n.addCart(e)},Ze,8,We)),[[p,"Agregar al carrito"]])])]))),128))])],2)]),s.tabactive==2?(l(),r("div",to,[j(w,{history:s.history,history_loading:s.history_loading,history_empty:s.history_empty},null,8,["history","history_loading","history_empty"])])):u("",!0),s.tabactive==3?(l(),r("div",so,[t("div",{class:f(["row",s.lastproducts_loading?"":"hidden"])},oo,2),t("div",{class:f(["row mt-3",s.lastproducts_empty&&!s.lastproducts_loading?"":"hidden"])},io,2),t("table",{class:f(["table table-striped",s.lastproducts_loading||s.lastproducts_empty?"hidden":""])},[lo,t("tbody",null,[(l(!0),r(y,null,b(s.lastproducts,(e,m)=>(l(),r("tr",{key:e.id},[t("td",null,a(e.oc),1),t("td",null,a(e.product_code),1),t("td",null,[_((l(),r("a",{class:"show-lnk",href:"javascript:void(0);","data-toggle":"modal","data-target":"#modal-item-details",onClick:h=>n.show(m)},[d(a(e.description),1)],8,ro)),[[p,"Click para Mostrar Detalles de este producto"]])]),t("td",co,a(e.um),1),t("td",no,a(e.quantity),1),_o,t("td",ho,[_((l(),r("a",{href:"javascript:void(0);",class:"btn-semti-tool",style:{padding:"4px 5px"},"data-toggle":"modal","data-target":"#modal-item-history",onClick:h=>n.productHistory(e.id_receipt,e.id)},mo,8,po)),[[p,"Historial de este producto"]]),d(" \xA0 "),_((l(),r("a",go,yo)),[[p,"Agregar al carrito"]])])]))),128))])],2)])):u("",!0)])])]),t("div",vo,[t("div",bo,[t("div",$o,[t("div",ko,[wo,t("button",Co,Eo,512)]),t("div",Ao,[t("div",To,[t("div",Do,[So,t("h6",Oo,a(s.item_details.pole.name),1)])]),t("div",Po,[t("div",qo,[Mo,t("h6",Fo,a(s.item_details.project.name),1)])]),t("div",xo,[t("div",No,[Uo,t("h6",Io,a(s.item_details.product_code),1)])]),t("div",Ho,[t("div",Ro,[Vo,t("h6",Bo,a(s.item_details.oc),1)])]),t("div",Jo,[t("div",Lo,[zo,t("h6",Ko,a(s.item_details.description),1)])]),t("div",Xo,[t("div",Go,[Qo,t("h6",Wo,a(s.item_details.um),1)]),t("div",Yo,[Zo,t("h6",ta,a(s.item_details.quantity),1)]),t("div",sa,[ea,t("h6",oa,a(s.item_details.stowage_card),1)])]),t("div",aa,[t("div",ia,[la,t("h6",ra,a(s.item_details.warehouse_name),1)]),t("div",ca,[da,t("h6",na,a(s.item_details.warehouse_owner),1)])])])])])]),t("div",_a,[t("div",ha,[t("div",pa,[t("div",ua,[ma,t("button",ga,ya,512)]),t("div",va,[t("div",ba,[t("div",$a,[j(w,{history:s.history_product,history_loading:s.history_product_loading,history_empty:s.history_product_empty},null,8,["history","history_loading","history_empty"])])])])])])]),t("div",ka,[t("div",wa,[t("div",Ca,[t("div",ja,[Ea,t("button",Aa,Da,512)]),t("div",Sa,[t("div",Oa,[t("div",Pa,[qa,t("h6",Ma,a(s.productcart.description),1)])]),t("div",Fa,[t("div",xa,[t("div",Na,[Ua,_(t("input",{type:"text",class:"form-control",id:"productcart_um",name:"productcart_um",disabled:"true","onUpdate:modelValue":o[10]||(o[10]=e=>s.productcart.um=e)},null,512),[[C,s.productcart.um]])])]),t("div",Ia,[t("div",Ha,[Ra,_(t("input",{type:"number",class:f(["form-control",s.productcart_error?"border-error":""]),id:"productcart_quantity",name:"productcart_quantity",step:".01",min:"1","onUpdate:modelValue":o[11]||(o[11]=e=>s.productcart_quantity=e),onKeyup:o[12]||(o[12]=O(e=>n.processAddCart(),["enter"]))},null,34),[[C,s.productcart_quantity]])])]),t("div",Va,[t("button",{type:"button",class:"btn btn-primary btn-green ripple",style:{"margin-top":"28px"},disabled:s.productcart_form_loading,onClick:o[13]||(o[13]=g(e=>n.processAddCart(),["stop"]))},[s.productcart_form_loading?(l(),r("i",La)):(l(),r("i",Ja)),d(" "+a(s.productcart_form_okbtn_text),1)],8,Ba)])])])])])])],64)}const Ya=T(Qs,[["render",za]]);export{Ya as default};
