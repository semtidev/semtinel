import{u as r}from"./vue.esm-bundler.5523ad96.js";var t=r({data(){return{auth:{username:"",password:""},form_processing:!1,login_windows:"Iniciar con Windows",login_semtinel:"Iniciar con Semtinel",error_txt:""}},watch:{ldap_processing:function(i){this.form_processing=i},auth_processing:function(i){this.form_processing=i}},methods:{async login(i){let e=this,n=i=="auth"?"login/auth":"login/ldap";e.form_processing=!0,i=="ldap"?e.login_windows="Validando usuario...":e.login_semtinel="Validando usuario...",await axios.get("sanctum/csrf-cookie"),await axios.post("api/"+n,this.auth).then(function(a){if(a.data.success){t.error_txt="";let o={id:a.data.user.id,email:a.data.user.email,username:a.data.user.username,first_name:a.data.user.first_name,last_name:a.data.user.last_name,access_token:a.data.access_token};sessionStorage.setItem("semtinel",JSON.stringify(o)),window.document.location.href=a.data.redirect}}).catch(function(a){e.form_processing=!1,i=="ldap"?e.login_windows="Iniciar con Windows":e.login_semtinel="Iniciar con Semtinel",t.error_txt="Ha habido un error. Por favor, prueba nuevamente."})}},mounted(){sessionStorage.removeItem("semtinel")}}).mount("#login");
